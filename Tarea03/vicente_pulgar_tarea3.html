<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mi Tienda - Tarea 2</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Tu CSS personalizado -->
  <link rel="stylesheet" href="estilo_tareas.css">
</head>
<body>

  <!-- Encabezados -->
  <h1 class="mb-4">Pulgar Store</h1>
  <h2>¡Bienvenido a la mejor página online sobre perros y fútbol!</h2>
  <h3>Para poder adquirir más información sobre perros y fútbol debemos validar tu identidad: (Tarea 3)</h3>

  <div class="container my-5">
    <h2 class="mb-4 text-primary">RUT</h2>
    <form id="rutForm" class="p-4 rounded shadow-sm bg-light">
      <div class="mb-3">
        <label for="rut" class="form-label">Validación RUT</label>
        <input 
          type="text" 
          class="form-control"
          id="rut" 
          name="rut" 
          pattern="^\d{1,2}\.\d{3}\.\d{3}-[0-9kK]{1}$" 
          placeholder="Ej: 12.345.678-5" 
          required
        >
        <div class="form-text">Formato: XX.XXX.XXX-Y</div>
      </div>
      <button type="submit" class="btn btn-primary">Validar</button>
    </form>
    <div id="resultado" class="mt-3"></div>
  </div>

  <script>
    function calcularDV(rutSinDV) {
      let rut = rutSinDV.replace(/\./g, '').replace(/-/g, '');
      let suma = 0;
      let multiplo = 2;
      for (let i = rut.length - 1; i >= 0; i--) {
        suma += parseInt(rut.charAt(i)) * multiplo;
        multiplo = multiplo < 7 ? multiplo + 1 : 2;
      }
      let dv = 11 - (suma % 11);
      if (dv === 11) return '0';
      if (dv === 10) return 'K';
      return dv.toString();
    }

    document.getElementById('rutForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const rutInput = document.getElementById('rut').value;
      const rutMatch = rutInput.match(/^(\d{1,2}\.\d{3}\.\d{3})-([0-9kK]{1})$/);
      const resultado = document.getElementById('resultado');
      if (!rutMatch) {
        resultado.textContent = "Formato incorrecto. Ejemplo: 12.345.678-5";
        resultado.className = "alert alert-danger";
        return;
      }
      const rutSinDV = rutMatch[1];
      const dvIngresado = rutMatch[2].toUpperCase();
      const dvCalculado = calcularDV(rutSinDV);
      if (dvIngresado === dvCalculado) {
        resultado.textContent = "RUT válido.";
        resultado.className = "alert alert-success";
      } else {
        resultado.textContent = `Dígito verificador incorrecto. Debe ser: ${dvCalculado}`;
        resultado.className = "alert alert-danger";
      }
    });
  </script>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>